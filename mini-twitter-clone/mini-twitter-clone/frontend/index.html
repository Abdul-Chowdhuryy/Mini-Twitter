
<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><title>Mini Twitter</title></head><body>
<h1>Mini Twitter</h1>
<form id="f"><input id="author" placeholder="name"/><br/><textarea id="text" placeholder="What's happening?"></textarea><br/><button>Post</button></form>
<ul id="posts"></ul>
<script>
async function load(){
  const res = await fetch('/api/posts');
  const posts = await res.json();
  const ul = document.getElementById('posts'); ul.innerHTML='';
  posts.slice().reverse().forEach(p=>{
    const li = document.createElement('li');
    li.textContent = p.author + ': ' + p.text;
    ul.appendChild(li);
  });
}
document.getElementById('f').addEventListener('submit', async e=>{
  e.preventDefault();
  const author = document.getElementById('author').value || 'Anon';
  const text = document.getElementById('text').value;
  await fetch('/api/posts',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify({author,text})});
  document.getElementById('text').value='';
  load();
});
load();
</script>
</body></html>
